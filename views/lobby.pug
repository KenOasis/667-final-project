<!DOCTYPE html>
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    meta(http-equiv="X-UA-Compatible" content="ie=edge")
    //- meta(http-equiv="Content-Security-Policy" content="upgrade-insecure-requests")
    title Uno!
    link(
     href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
     rel="stylesheet" 
     integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" 
     crossorigin="anonymous"
    )

body
  header(class = "header") 
    img(
      src="/images/logo.png"
      class="rounded mx-auto img-fluid d-block has-popover"
      data-bs-content= "Enjoy you game! :)"
      alt="Responsive image"
      width="200"
      height="200"
      )
  input(type="hidden" value=(whoami) id="whoami")
  div(class="container" style="height:100%")
    div(class="row")
        div(class="col-4")
            div(class="row")
              h3(class="col-3") Games
              span(class="btn col-1 badge bg-primary mt-2" style="height: 1.5rem; width: 4rem" 
              data-bs-toggle="modal" data-bs-target="#addGameModal"
              ) + game
            ul(class="list-group rounded" style="border:2px solid #dedede; height:200px; overflow-y:auto" id="game_list")
              //- li(class = "list-group-item d-flex justify-content-between" id="game-1") 
              //-   div(class="badge bg-light text-primary" id="game-1-name") game1
              //-   div
              //-     span(class="badge bg-info rounded-spill mx-1" id="game-1-start") start
              //-     span(class="badge bg-warning rounded-spill mx-1" id="game-1-leave") leave
              //-   div
              //-     span(class="badge bg-danger rounded-spill mx-1" id="game-1-vacancy") 1 / 4
              //-     span(class="badge bg-primary rounded-spill" id="game-1-status") waiting
               
        
            br
            div(class="row")
              h3(class="col-3") Online
              a(class="btn col-1 badge bg-primary mt-2" style="height: 1.5rem; width: 4rem" href="/") leave
            ul(class="list-group rounded" id="user_list" style="border:2px solid #dedede; height:200px; overflow-y:auto")
              //- li(class = "list-group-item d-flex justify-content-between align-items-center") /////-   div(class="badge bg-light text-primary")
              //-     player1
              //-   span(class="badge bg-primary rounded-spill") in game
           

            
          

        div(class="col-8")
            h2 Chat
            div(
                class="col rounded"
                id="lobby_chat"
                style="border:2px solid #dedede; height:400px; overflow-y:auto"
            )
                //- div(class="card border-danger mb-1 border-0")
                //-     div(class="card-body")
                //-         span(class="badge bg-light text-primary") player1
                //-         p(class="card-text text-info") Hello
            br

                
            div(class="input-group mb-3 rounded")
                input(type="text "
                      class="form-control"
                      id="chat_input"
                      )
                div(class="input-group-append")
                    button(
                        type="button"
                        class="btn btn-outline-danger"
                        onClick="sendChat()"
                    ) send
  div(class="modal fade" id="addGameModal" tabindex="-1" role="dialog" aria-labelledby="addGameModalLabel" aria-hidden="true")
    div(class="modal-dialog" role="ducoment")
      div(class="modal-content")
        div(class="modal-header")
          h5(class="modal-title" id="addGameModalLabel") Create new game
        div(class="modal-body row align-item-center")
          div(class="col-auto")
            label(for="game_name" class="col-form-label") Name
          div(class="col-auto")
            input(type="text" id="game_name" class="form-control")
        div(class="modal-footer")
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onClick="createGame()">Add</button>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
    // Toasts 
  div(aria-live="polite" aria-atomic="true" class="position-relative")
    div(class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 2000" id="toast_container")
  script(src="/socket.io/socket.io.js")
  script(type="text/javascript" src="/js/lobby/elements.js")
  script(type="text/javascript" src="/js/lobby/api.js")
  script(type="text/javascript" src="/js/lobby/socket.js")

  script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous")
  script(type="text/javascript" src="/js/toggle.js")